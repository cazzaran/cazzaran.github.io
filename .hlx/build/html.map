{"version":3,"sources":["html.pre.js"],"names":["pre","payload","sections","content","bgImg","backgroundImage","url","mdast","children","headerSection","bodySections","slice","s","bSec","html","includes","time","Date","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;AAkBA;;;;;;AAMA,SAASA,GAAT,CAAaC,OAAb,EAAsB;AACpB,MAAIC,WAAWD,QAAQE,OAAR,CAAgBD,QAA/B;AACA,MAAIE,QAAQH,QAAQE,OAAR,CAAgBE,eAAhB,GAAkCH,SAAS,CAAT,CAA9C;AACAD,UAAQE,OAAR,CAAgBE,eAAhB,CAAgCC,GAAhC,GAAsCF,MAAMG,KAAN,CAAYC,QAAZ,CAAqB,CAArB,EAAwBA,QAAxB,CAAiC,CAAjC,EAAoCF,GAA1E;AACAL,UAAQE,OAAR,CAAgBM,aAAhB,GAAgCP,SAAS,CAAT,CAAhC;AACAD,UAAQE,OAAR,CAAgBO,YAAhB,GAA+BR,SAASS,KAAT,CAAe,CAAf,CAA/B;AACA,OAAI,IAAIC,CAAR,IAAaX,QAAQE,OAAR,CAAgBO,YAA7B,EAA2C;AACzC,QAAIG,OAAOZ,QAAQE,OAAR,CAAgBO,YAAhB,CAA6BE,CAA7B,CAAX;AACA,QAAGC,KAAKC,IAAL,CAAUC,QAAV,CAAmB,MAAnB,CAAH,EAA+B;AAC7BF,WAAKP,GAAL,GAAWO,KAAKN,KAAL,CAAWC,QAAX,CAAoB,CAApB,EAAuBA,QAAvB,CAAgC,CAAhC,EAAmCF,GAA9C;AACD;AACF;AACDL,UAAQE,OAAR,CAAgBa,IAAhB,GAAwB,GAAE,IAAIC,IAAJ,EAAW,EAArC;AACD;;AAEDC,OAAOC,OAAP,CAAenB,GAAf,GAAqBA,GAArB","file":"html.map","sourceRoot":"../../src","sourcesContent":["/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * The 'pre' function that is executed before the HTML is rendered\n * @param payload The current payload of processing pipeline\n * @param payload.content The content\n */\n\nfunction pre(payload) {  \n  var sections = payload.content.sections;\n  var bgImg = payload.content.backgroundImage = sections[0];\n  payload.content.backgroundImage.url = bgImg.mdast.children[0].children[0].url;\n  payload.content.headerSection = sections[1];  \n  payload.content.bodySections = sections.slice(2);\n  for(var s in payload.content.bodySections) {\n    var bSec = payload.content.bodySections[s];\n    if(bSec.html.includes('<img')) {\n      bSec.url = bSec.mdast.children[0].children[0].url;\n    }\n  }\n  payload.content.time = `${new Date()}`;\n}\n\nmodule.exports.pre = pre;\n"]}